{% import "Ceres::Category.Macros.CategoryTree" as Tree %}
{% set companyLogo  = config("Ceres.header.company_logo") %}
{% set lang         = services.sessionStorage.getLang() %}
{% set showHeaderNavBar = config("Ceres.header.show_navbars") %}
{% set companyName  = config("Ceres.header.company_name") %}

<nav class="navbar">
      <div class="container-max">
        <div class="row">
             <div class="brand-wrapper" {% if showHeaderNavBar == "side" %}style="position: relative"{% endif %}>
                 <a class="navbar-brand pull-lg-left" href="/">
                     {% if ('http' in companyLogo) or ('layout/' in companyLogo) %}
                         <img alt="{{ companyName }}" src="{{ companyLogo }}" class="img-fluid"/>
                     {% else %}
                        <img alt="{{ companyName }}" src="{{ plugin_path('Ceres') }}/{{ companyLogo }}" class="img-fluid"/>
                     {% endif %}
                 </a>

                 <button id="btnMainMenuToggler" class="navbar-toggler hidden-lg-up" type="button">
                     &#9776;
                 </button>
             </div>

            <div id="mainNavbarCollapsable">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a>{{ trans("Ceres::Template.generalBigAll") }}</a></li>
                    <li class="btnClose"></li>
                </ul>
                {% if showHeaderNavBar == "top" or showHeaderNavBar == "both" or not services.template.isCategory() %}
                    <ul class="mainmenu pull-lg-right">
                        {{ Tree.get_nav_bar(categories, "") }}
                    </ul>
                {% endif %}
            </div>

            {# MARKUP #}
            <div class="top-menu">
                <ul class="breadcrumb">
                    <li transition="breadcrumb-item" v-for="item in getBreadcrumbItems(activeItem)" v-bind:key="item.id">
                        <a href="#" v-on:click="triggerItem(item.id, 'back')">{{ item.title }}</a>
                    </li>
                </ul>

                <a class="button-close" href="#" onclick="$('#MobileNavigation').trigger('close');">X</a>
            </div>
            <div class="menu-wrap">
                <ul v-menu class="menu menu-{{ menuIndex }}" v-for="(menuIndex, menu) in getGroupedMenus()">
                    <li class="menu-item" v-bind:class="{ 'has-sub': itemHasChildren(item), 'has-url': item.url }" v-for="item in menu" v-bind:key="item.id">
                        <a href="#" v-on:click="triggerItem(item.id, 'useUrl')">{{ item.title }}</a>
                        <a class="dots" href="#" v-on:click="triggerItem(item.id)" v-if="itemHasChildren(item)">...</a>
                    </li>
                </ul>
            </div>
            {# /MARKUP #}
        </div>
    </div>
</nav>

