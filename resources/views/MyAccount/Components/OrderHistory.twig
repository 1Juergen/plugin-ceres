<script type="x/template" id="vue-order-history">

    <div class="page-content history container-max">
        <div class="row m-b-3">
            <h1 class="h4 col-xs-12">{{ trans("PluginCallisto::Callisto.orderHistory") }}</h1>
        </div>

        <div class="form-group">

            <div class="row m-b-1">
                <div class="col-xs-12 col-md-9 col-lg-8">
                    <!-- ORDER PAGINATION -->
                    <div class="clearfix">
                        <div class="pull-xs-left">
                            {{ trans("PluginCallisto::Callisto.orderShow") }} ${ countStart } - ${ countEnd } {{ trans("PluginCallisto::Callisto.orderOf") }} ${ orderList.totalsCount } {{ trans("PluginCallisto::Callisto.orderOrders") }}
                        </div>

                        <nav class="cmp cmp-paginator row pull-xs-right text-xs-center">
                            <ul class="pagination col-xs-12 m-y-0">

                                <!-- PREV LINK -->
                                <li class="page-item" :class="{disabled: page == 1}">
                                    <button class="page-link" @click="showPage(page-1)">&laquo;</button>
                                </li>
                                <!-- ./PREV LINK -->

                                <!-- FIRST PAGE LINK -->
                                <li class="page-item" v-if="page > 2 && showFirstPage == true">
                                    <button class="page-link" @click="showPage(1)">1</button>
                                </li>
                                <li class="page-item page-link" v-if="page > 2 && showFirstPage == true">...</li>
                                <!-- ./FIRST PAGE LINK -->

                                <!-- PAGINATION -->
                                <li class="page-item" v-if="orderList.isLastPage && page > 2">
                                    <button class="page-link" @click="showPage(page-2)">${ page - 2 }</button>
                                </li>

                                <li class="page-item" v-if="page > 1">
                                    <button class="page-link" @click="showPage(page-1)">${ page - 1 }</button>
                                </li>

                                <li class="page-item active">
                                    <span class="page-link">${ page }</span>
                                </li>

                                <li class="page-item" v-if="!orderList.isLastPage">
                                    <button class="page-link" @click="showPage(page+1)">${ page + 1 }</button>
                                </li>

                                <li class="page-item" v-if="page == 1 && page+2 <= pageMax">
                                    <button class="page-link" @click="showPage(page+2)">${ page + 2 }</button>
                                </li>
                                <!-- ./PAGINATION -->

                                <!-- LAST PAGE LINK -->
                                <li class="page-item page-link" v-if="pageMax > 3 && page < pageMax-1 && showLastPage">...</li>
                                <li class="page-item" v-if="pageMax > 3 && page < pageMax-1 && showLastPage">
                                    <button class="page-link" @click="showPage(pageMax)">${ pageMax }</button>
                                </li>
                                <!-- ./LAST PAGE LINK -->

                                <!-- NEXT LINK -->
                                <li class="page-item" :class="{disabled: orderList.isLastPage}">
                                    <button class="page-link" @click="showPage(page+1)">&raquo;</button>
                                </li>
                                <!-- ./NEXT LINK -->
                            </ul>
                        </nav>
                    </div>
                    <!-- ./ORDER PAGINATION -->

                    <hr>

                    <!-- ORDER HISTORY -->
                    <div class="order-list">
                        <article class="cmp cmp-order-item" v-for="entry in orderList.entries">

                            <div class="item-details small">

                                <div class="item-name">
                                    <h5>{{ trans("PluginCallisto::Callisto.orderId") }} ${ entry.order.id }</h5>
                                </div>

                                <div class="row">
                                    <div class="col-xs-12 col-md-6">
                                        <div class="row">
                                            <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderDate") }}</strong>
                                            <span class="col-xs-6 col-sm-7">${ entry.order.createdAt | moment "{{ trans("PluginCallisto::Callisto.dateTimeFormatMoment") }}" }</span>
                                        </div>
                                        <div class="row">
                                            <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderStatus") }}</strong>
                                            <span class="col-xs-6 col-sm-7">${ entry.status.frontendName }</span>
                                        </div>
                                    </div>

                                    <div class="col-xs-12 col-md-6">
                                        <button class="btn btn-primary btn-block" @click="setCurrentOrder(entry)">{{ trans("PluginCallisto::Callisto.orderDetails") }}</button>
                                    </div>
                                </div>
                            </div>

                        </article>
                    </div>
                    <!-- ./ORDER HISTORY -->
                </div>

                <!-- ORDER DETAILS MODAL -->
                <div class="modal fade" v-el:order-details v-if="currentOrder" tabindex="-1" role="dialog">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h3 class="modal-title">{{ trans("PluginCallisto::Callisto.orderDetails") }}</h3>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-6 m-b-2">
                                        <div class="card small">
                                            <!-- ORDER -->
                                            <div class="card-header">
                                                <h5>{{ trans("PluginCallisto::Callisto.orderId") }} ${ currentOrder.order.id }</h5>
                                            </div>
                                            <div class="card-block">
                                                <div class="details">
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderDate") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">${ currentOrder.order.createdAt | date "{{ trans("PluginCallisto::Callisto.dateTimeFormatMoment") }}" }</span>
                                                    </div>

                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderStatus") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">${ currentOrder.status.frontendName }</span>
                                                    </div>
                                                </div>

                                                <hr>

                                                <div>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderInvoiceAddress") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">
                                                            <div>${currentOrder.order.billingAddress.name1}</div>
                                                            <div>${currentOrder.order.billingAddress.name2} ${currentOrder.order.billingAddress.name3}</div>
                                                            <div>${currentOrder.order.billingAddress.name4}</div>
                                                            <div>${currentOrder.order.billingAddress.address1} ${currentOrder.order.billingAddress.address2}</div>
                                                            <div>${currentOrder.order.billingAddress.postalCode} ${currentOrder.order.billingAddress.town}</div>
                                                        </span>
                                                    </div>

                                                    <div class="row m-t-1">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderShippingAddress") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">
                                                            <span v-if="currentOrder.order.billingAddress.id == currentOrder.order.deliveryAddress.id">
                                                                {{ trans("PluginCallisto::Callisto.addressSameAsInvoice") }}
                                                            </span>
                                                            <span v-else>
                                                                <div>${currentOrder.order.deliveryAddress.name1}</div>
                                                                <div>${currentOrder.order.deliveryAddress.name2} ${currentOrder.order.deliveryAddress.name3}</div>
                                                                <div>${currentOrder.order.deliveryAddress.name4}</div>
                                                                <div>${currentOrder.order.deliveryAddress.address1} ${currentOrder.order.deliveryAddress.address2}</div>
                                                                <div>${currentOrder.order.deliveryAddress.postalCode} ${currentOrder.order.deliveryAddress.town}</div>
                                                            </span>
                                                        </span>
                                                    </div>
                                                </div>

                                                <hr>

                                                <div>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderPaymentMethod") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">${ currentOrder.paymentMethodName }</span>
                                                    </div>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderPaymentStatus") }}</strong>
                                                        <span class="col-xs-6 col-sm-7" v-if="paymentStatus === 'unpaid'">{{ trans("PluginCallisto::Callisto.paymentStatus_unpaid") }}</span>
                                                        <span class="col-xs-6 col-sm-7" v-if="paymentStatus === 'prepaid'">{{ trans("PluginCallisto::Callisto.paymentStatus_prepaid") }}</span>
                                                        <span class="col-xs-6 col-sm-7" v-if="paymentStatus === 'partlyPaid'">{{ trans("PluginCallisto::Callisto.paymentStatus_partlyPaid") }}</span>
                                                        <span class="col-xs-6 col-sm-7" v-if="paymentStatus === 'fullyPaid'">{{ trans("PluginCallisto::Callisto.paymentStatus_fullyPaid") }}</span>
                                                        <span class="col-xs-6 col-sm-7" v-if="paymentStatus === 'overpaid'">{{ trans("PluginCallisto::Callisto.paymentStatus_overpaid") }}</span>
                                                    </div>
                                                </div>

                                                <hr>

                                                <div>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderShippingProfile") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">${ currentOrder.shippingProvider } - ${ currentOrder.shippingProfileName }</span>
                                                    </div>

                                                    <div class="row" v-if="shippingDate">
                                                        <strong class="col-xs-6 col-sm-5">{{ trans("PluginCallisto::Callisto.orderEstimatedShippingDate") }}</strong>
                                                        <span class="col-xs-6 col-sm-7">${ shippingDate | moment "{{ trans("PluginCallisto::Callisto.dateFormatMoment") }}" }</span>
                                                    </div>
                                                </div>

                                            </div>
                                            <!-- ORDER -->
                                        </div>

                                    </div>

                                    <div class="col-md-6">
                                        <div class="confirmation-order-list">

                                            <article class="cmp cmp-order-item" v-for="item in currentOrderItems">
                                                <a :href="currentOrder.itemURLs[item.itemVariationId]" class="item-image">
                                                    <img :src="currentOrder.itemImages[item.itemVariationId]">
                                                </a>
                                                <div class="item-details small">
                                                    <a :href="currentOrder.itemURLs[item.itemVariationId]" class="clearfix">
                                                        <div class="item-name">
                                                            ${ item.orderItemName }
                                                        </div>
                                                    </a>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-3">{{ trans("PluginCallisto::Callisto.orderPricePerPiece") }}</strong>
                                                        <span class="col-xs-6 col-sm-9">${ item.amounts[0].priceGross | currency item.amounts[0].currency  }</span>
                                                    </div>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-3">{{ trans("PluginCallisto::Callisto.orderPeace") }}</strong>
                                                        <span class="col-xs-6 col-sm-9">${ item.quantity }</span>
                                                    </div>
                                                    <div class="row">
                                                        <strong class="col-xs-6 col-sm-3">{{ trans("PluginCallisto::Callisto.orderTotal") }}</strong>
                                                        <strong class="col-xs-6 col-sm-9">${ (item.quantity * item.amounts[0].priceGross) | currency item.amounts[0].currency }</strong>
                                                    </div>
                                                </div>
                                            </article>

                                        </div>
                                        <div class="gesamtsumme">
                                            <!-- BASKET TOTALS -->
                                            <div class="cmp cmp-totals">
                                                <h3>{{ trans("PluginCallisto::Callisto.basketSum") }}</h3>
                                                <div>
                                                    <dl>
                                                        <dt v-if="showProperty( 'basket.value_of_items_gross' )">
                                                            <strong>{{ trans("PluginCallisto::Callisto.basketValue") }} ({{ trans("PluginCallisto::Callisto.basketGross") }})</strong>
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.value_of_items_gross' )">
                                                            <strong>${ totals.itemSum | currency totals.currency }</strong>
                                                        </dd>

                                                        <dt v-if="showProperty( 'basket.value_of_items_net' )">
                                                            {{ trans("PluginCallisto::Callisto.basketValue") }} ({{ trans("PluginCallisto::Callisto.basketNet") }})
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.value_of_items_net' )">
                                                            ${ totals.itemSumNet | currency totals.currency }
                                                        </dd>

                                                        <dt v-if="showProperty( 'basket.shipping_costs_gross' )">
                                                            <strong>{{ trans("PluginCallisto::Callisto.itemShippingCosts") }} ({{ trans("PluginCallisto::Callisto.basketGross") }})</strong>
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.shipping_costs_gross' )">
                                                            <strong>${ totals.shippingAmount | currency totals.currency }</strong>
                                                        </dd>

                                                        <dt v-if="showProperty( 'basket.shipping_costs_net' )">
                                                            {{ trans("PluginCallisto::Callisto.itemShippingCosts") }} ({{ trans("PluginCallisto::Callisto.basketNet") }})
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.shipping_costs_net' )">
                                                            ${ totals.shippingAmountNet | currency totals.currency }
                                                        </dd>

                                                        <dt v-if="showProperty( 'basket.vat' )">
                                                            {{ trans("PluginCallisto::Callisto.basketVAT") }}
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.vat' )">
                                                            ${ totals.vat | currency totals.currency }
                                                        </dd>

                                                        <hr>

                                                        <dt v-if="showProperty( 'basket.order_total_gross' )">
                                                            <strong>{{ trans("PluginCallisto::Callisto.basketTotalSum") }} ({{ trans("PluginCallisto::Callisto.basketGross") }})</strong>
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.order_total_gross' )">
                                                            <strong>${ totals.totalAmount | currency totals.currency }</strong>
                                                        </dd>

                                                        <dt v-if="showProperty( 'basket.order_total_net' )">
                                                            {{ trans("PluginCallisto::Callisto.basketTotalSum") }} ({{ trans("PluginCallisto::Callisto.basketNet") }})
                                                        </dt><!--
                                                     --><dd v-if="showProperty( 'basket.order_total_net' )">
                                                            ${ totals.totalAmountNet | currency totals.currency }
                                                        </dd>
                                                    </dl>
                                                </div>
                                            </div>
                                            <!-- ./BASKET TOTALS -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ./ORDER DETAILS MODAL -->

                <!-- ORDER FILTER -->
                <div class="col-xs-12 col-md-3 col-lg-4">
                    <div class="input-unit">
                        <input id="auftragId" type="text">
                        <label for="auftragId">{{ trans("PluginCallisto::Callisto.orderEnterOrderId") }}</label>
                    </div>

                    <div class="input-unit">
                        <select class="custom-select" id="TimePeriod">
                            <option>---</option>
                            <option>{{ trans("PluginCallisto::Callisto.orderLast30Days") }}</option>
                            <option>{{ trans("PluginCallisto::Callisto.orderLast3Month") }}</option>
                            <option>{{ trans("PluginCallisto::Callisto.orderLast6Month") }}</option>
                        </select>
                        <label for="TimePeriod">{{ trans("PluginCallisto::Callisto.orderSelectTimePeriod") }}</label>
                    </div>

                    <div class="row">
                        <div class="col-xs-12 col-lg-6">
                            <div class="input-unit">
                                <input id="von" type="text">
                                <label for="von">{{ trans("PluginCallisto::Callisto.orderFrom") }}</label>
                            </div>
                        </div>

                        <div class="col-xs-12 col-lg-6">
                            <div class="input-unit">
                                <input id="auftragId" type="text">
                                <label for="auftragId">{{ trans("PluginCallisto::Callisto.orderTo") }}</label>
                            </div>
                        </div>

                    </div>

                    <div class="m-b-3">
                        <input type="submit" class="btn btn-primary btn-block" value="{{ trans("PluginCallisto::Callisto.orderApply") }}">
                    </div>

                </div>
                <!-- ./ORDER FILTER -->
            </div>

        </div>

    </div>
    <!-- customerdata end -->
</script>